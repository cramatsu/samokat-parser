# Парсер данных с сайта Samokat

Этот проект предназначен для парсинга данных с сайта Samokat, включая категории товаров и информацию о продуктах. Он использует Selenium для автоматизации браузера и PostgreSQL для хранения данных.

## Установка и развертывание в Docker

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/cramatsu/samokat-parser.git
   cd samokat-parser
   ```

2. **Убедитесь, что Docker установлен и запущен на вашем компьютере.**

3. **Запустите Docker Compose для развертывания базы данных и Selenium:**
   ```bash
   docker-compose up -d
   ```

## Описание работы

При первом запуске скрипт выполняет следующие шаги:

1. **Проверка состояния базы данных:**

   - Скрипт ожидает, пока база данных будет доступна для подключения. Это происходит благодаря механизму `healthcheck` в Docker Compose, который проверяет состояние контейнера PostgreSQL.

2. **Запуск Selenium WebDriver:**

   - После успешной проверки состояния базы данных запускается контейнер с Selenium, который предоставляет интерфейс для автоматизации браузера.

3. **Парсинг категорий товаров:**

   - Если указан аргумент `--parse-categories`, скрипт обращается к сайту Samokat, загружает страницу с категориями товаров и извлекает их названия и URL.
   - Извлеченные данные о категориях записываются в таблицу `categories` в базе данных PostgreSQL.

4. **Парсинг продуктов:**

   - После получения списка категорий скрипт перебирает каждую категорию и выполняет запрос к соответствующему URL.
   - На каждой странице категории извлекаются данные о продуктах, включая название, цену, описание и изображение.
   - Эти данные записываются в таблицу `products`, где каждый продукт связан с его категорией.

5. **Обработка ошибок:**
   - Скрипт включает обработку ошибок для управления возможными сбоями при подключении к базе данных или во время выполнения парсинга. При возникновении ошибок выводятся соответствующие сообщения в консоль.
